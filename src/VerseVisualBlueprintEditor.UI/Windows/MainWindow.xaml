<Window x:Class="VerseVisualBlueprintEditor.UI.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Verse Visual Blueprint Editor" 
        Height="900" Width="1400"
        Style="{StaticResource UnrealWindow}"
        WindowStartupLocation="CenterScreen">
    <DockPanel Background="#1a1a1a">
        <!-- Menu Bar -->
        <StackPanel DockPanel.Dock="Top" Background="#242424" Height="40" Orientation="Horizontal" Margin="0,0,0,0">
            <Button Content="New" Style="{StaticResource UnrealButton}" Margin="4" Click="NewFile_Click"/>
            <Button Content="Open" Style="{StaticResource UnrealButton}" Margin="4" Click="OpenFile_Click"/>
            <Button Content="Load Workspace" Style="{StaticResource UnrealButton}" Margin="4" Click="LoadWorkspace_Click"/>
            <Button Content="Save" Style="{StaticResource UnrealButton}" Margin="4" Click="Save_Click"/>
            <Separator Background="#3a3a3a" Width="1" Margin="4,0"/>
            <Button Content="Export to .verse" Style="{StaticResource UnrealButton}" Margin="4" Click="Export_Click"/>
            <Button Content="Settings" Style="{StaticResource UnrealButton}" Margin="4" Click="Settings_Click"/>
        </StackPanel>

        <!-- Main Content Area -->
        <Grid>
            <!-- Left Panel - Blueprint Graph -->
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="auto"/>
            </Grid.ColumnDefinitions>

            <!-- Blueprint Canvas -->
            <Border Grid.Column="0" Background="#1a1a1a" BorderBrush="#3a3a3a" BorderThickness="1">
                <Grid x:Name="BlueprintCanvas" Background="#1a1a1a" AllowDrop="True"/>
            </Border>

            <!-- Right Panel - Details -->
            <GridSplitter Grid.Column="1" Width="5" Background="#242424" HorizontalAlignment="Right"/>

            <!-- Details Panel -->
            <Border Grid.Column="1" Background="#242424" BorderBrush="#3a3a3a" BorderThickness="1,0,0,0" Width="350">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Details Header -->
                    <Border Grid.Row="0" Background="#1a1a1a" BorderBrush="#3a3a3a" BorderThickness="0,0,0,1" Padding="8">
                        <TextBlock Text="Details" Foreground="#ffffff" FontSize="14" FontWeight="Bold"/>
                    </Border>

                    <!-- Details Content -->
                    <TabControl Grid.Row="1" Background="#1a1a1a" Foreground="#ffffff">
                        <!-- Variables Tab -->
                        <TabItem Header="Variables" Background="#242424" Foreground="#ffffff">
                            <Grid Background="#1a1a1a">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="auto"/>
                                </Grid.RowDefinitions>

                                <ListBox Grid.Row="0" x:Name="VariablesList" Background="#1a1a1a" 
                                         BorderBrush="#3a3a3a" Foreground="#ffffff"
                                         SelectionChanged="VariablesList_SelectionChanged">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="#2a2a2a" Padding="8" Margin="0,2" 
                                                    BorderBrush="#3a3a3a" BorderThickness="1">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Grid.Column="0" Orientation="Vertical">
                                                        <TextBlock Text="{Binding Name}" Foreground="#ffffff" FontWeight="Bold"/>
                                                        <TextBlock Text="{Binding Type}" Foreground="#b0b0b0" FontSize="10"/>
                                                    </StackPanel>
                                                    <Button Grid.Column="1" Content="âœ•" 
                                                            Style="{StaticResource UnrealButton}" 
                                                            Width="20" Height="20" Padding="0"
                                                            Click="RemoveVariable_Click"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>

                                <Button Grid.Row="1" Content="+ Add Variable" 
                                        Style="{StaticResource UnrealButton}" 
                                        Click="AddVariable_Click" Margin="4"/>
                            </Grid>
                        </TabItem>

                        <!-- Variable Properties Tab -->
                        <TabItem Header="Properties" Background="#242424" Foreground="#ffffff">
                            <ScrollViewer Background="#1a1a1a" VerticalScrollBarVisibility="Auto">
                                <StackPanel x:Name="PropertiesPanel" Padding="8" Background="#1a1a1a">
                                    <!-- Will be populated dynamically -->
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>

                        <!-- Verse Classes Tab -->
                        <TabItem Header="Verse Classes" Background="#242424" Foreground="#ffffff">
                            <Grid Background="#1a1a1a">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <StackPanel Grid.Row="0" Orientation="Vertical" Margin="8">
                                    <TextBlock Text="Loaded Classes" Foreground="#ffffff" Margin="0,0,0,4"/>
                                    <TextBox Style="{StaticResource UnrealTextBox}" 
                                             x:Name="ClassSearchBox" 
                                             Foreground="#ffffff"
                                             TextChanged="ClassSearchBox_TextChanged"
                                             Padding="4"/>
                                </StackPanel>

                                <ListBox Grid.Row="1" x:Name="ClassesList" 
                                         Background="#1a1a1a" 
                                         BorderBrush="#3a3a3a"
                                         Foreground="#ffffff"
                                         Margin="0,0,0,4">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="#2a2a2a" Padding="8" Margin="0,2"
                                                    BorderBrush="#3a3a3a" BorderThickness="1">
                                                <StackPanel Orientation="Vertical">
                                                    <TextBlock Text="{Binding Name}" 
                                                               Foreground="#ffffff" FontWeight="Bold"/>
                                                    <TextBlock Text="{Binding FullPath}" 
                                                               Foreground="#b0b0b0" FontSize="9"/>
                                                </StackPanel>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </Grid>
                        </TabItem>
                    </TabControl>
                </Grid>
            </Border>
        </Grid>
    </DockPanel>
</Window>
